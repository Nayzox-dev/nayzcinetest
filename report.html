<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Signalez un probl√®me avec un film ou une s√©rie sur Nayzcine">
    <title>Signaler un probl√®me - Nayzcine</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="suggestions.css">
</head>
<body>

    <!-- Barre de navigation flottante -->
    <header class="navbar">
        <div class="logo">Nayzcine</div>
        <nav class="menu">
            <a href="index2.html">Nouveaut√©</a>
            <a href="suggestions.html">Suggestions</a>
            <a href="report.html" class="active">Signaler</a>
        </nav>
        <div class="search-container">
            <input type="text" id="search" placeholder="üîç Rechercher...">
            <div id="search-results"></div>
        </div>
        <!-- üçî Menu Burger -->
        <button class="burger-menu">
            <span>&#9776;</span> <!-- Symbole du hamburger -->
        </button>
    </header>    

<!-- Section des suggestions -->
<main id="suggestions">
    <section class="category">
        <h2>Signaler un probl√®me</h2>
        <form method="POST" id="suggestion-form">
            <label>
                Nom du film ou s√©rie :
                <input type="text" name="title" placeholder="Nom du film ou s√©rie" required>
            </label>

            <label>
                Type :
                <select name="type" required>
                    <option value="" disabled selected>Film ou S√©rie ?</option>
                    <option value="Film">Film</option>
                    <option value="S√©rie">S√©rie</option>
                </select>
            </label>

            <label>
                D√©crire le probl√®me :
                <textarea name="problem_description" placeholder="Expliquez ce qui ne fonctionne pas..." required></textarea>
            </label>

            <button type="submit">Envoyer</button>
        </form>

        <!-- Message de confirmation -->
        <div id="suggestion-response" style="display: none; color: lightgreen; margin-top: 15px; font-size: 1.2rem;">
            ‚úÖ Le probl√®me a bien √©t√© envoy√©, il sera r√©gl√© d√®s que possible !
        </div>
    </section>
</main>

<script>
    const webhookURL = "https://discord.com/api/webhooks/1360730648016584955/2_dTwlYfUwEc2nvV4IqvGYAtmp8WzHmVSYqIxsj93Ou2b372eJ97dG631huZCYgdcBf8"; // Mets ton vrai lien ici

    document.getElementById("suggestion-form").addEventListener("submit", async function(event) {
        event.preventDefault();

        const form = event.target;
        const formData = new FormData(form);
        const title = formData.get("title");
        const type = formData.get("type");
        const description = formData.get("problem_description");

        const payload = {
            username: "üõ†Ô∏è Signalement de probl√®me",
            avatar_url: "https://i.imgur.com/Zz6v4gk.png",
            embeds: [
                {
                    title: "üö® Probl√®me signal√©",
                    description: "Un utilisateur a signal√© un souci via le site.",
                    color: 0x5865F2,
                    fields: [
                        {
                            name: "üé¨ Titre concern√©",
                            value: `> ${title}`
                        },
                        {
                            name: "üì∫ Type",
                            value: `> ${type}`
                        },
                        {
                            name: "‚ùó Description du probl√®me",
                            value: `> ${description}`
                        }
                    ],
                    footer: {
                        text: "Formulaire de signalement",
                        icon_url: "https://i.imgur.com/Zz6v4gk.png"
                    },
                    timestamp: new Date().toISOString()
                }
            ]
        };

        try {
            const response = await fetch(webhookURL, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(payload)
            });

            if (response.ok) {
                document.getElementById("suggestion-response").style.display = "block";
                form.reset();
            } else {
                alert("‚ùå Une erreur est survenue, veuillez r√©essayer.");
            }
        } catch (error) {
            alert("‚ùå Une erreur s'est produite, v√©rifiez votre connexion.");
        }
    });
</script>

    <script src="suggestions.js"></script>
    
</body>
</html>
